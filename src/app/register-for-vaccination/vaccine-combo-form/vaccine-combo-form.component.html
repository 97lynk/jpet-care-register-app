<div class="desktop-view">
  <mat-radio-group [formControl]="selectedVaccine">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z1  container">

      <!-- Combo name -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef colspan="2" style="text-align: center">
          <b>{{ 'vaccineComboForm.name' | translate }}</b>
        </th>
        <td [hidden]="row.rowspan.name === 0" [attr.rowspan]="row.rowspan.name" mat-cell *matCellDef="let row">
          <b>{{ row.name | translate }}</b>
        </td>
      </ng-container>

      <!-- Service -->
      <ng-container matColumnDef="content">
        <th mat-header-cell *matHeaderCellDef [hidden]="true"></th>
        <td mat-cell [hidden]="row.rowspan.content === 0" [attr.rowspan]="row.rowspan.content" *matCellDef="let row">
          <pre>{{ row.content | translate }}</pre>
        </td>
      </ng-container>

      <!-- Size -->
      <ng-container matColumnDef="size">
        <th mat-header-cell *matHeaderCellDef>
          <b>{{ 'vaccineComboForm.size' | translate }}</b>
        </th>
        <td mat-cell *matCellDef="let row" [class.disable-cell]="petSize.value !== row.value?.size">
          {{ row.size | translate }}
        </td>
      </ng-container>

      <!-- Price -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef>
          <b>{{ 'vaccineComboForm.price' | translate }}</b>
        </th>
        <td mat-cell *matCellDef="let row" [class.disable-cell]="petSize.value !== row.value?.size">
          ¥{{ row.price | number }}
        </td>
      </ng-container>

      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let row">
          <mat-radio-button (click)="onSelectVaccine(row.value)" [value]="row.value"
                            [disabled]="petSize.value !== row.value?.size"/>
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </mat-radio-group>
</div>

<mat-card class="container mobile-view">
  <mat-card-title>{{ 'vaccineComboForm.name' | translate }}</mat-card-title>
  <mat-radio-group [formControl]="selectedVaccine">
    @for (row of dataSource; track row) {
      <div>
        @if (row.rowspan.name !== 0) {
          <mat-divider style="margin-bottom: 1rem"/>
          <div><b>{{ row.name | translate }}</b></div>
          <div>
            <pre>{{ row.content | translate }}</pre>
          </div>
        }
        <div>
          <mat-radio-button [value]="row.value"
                            [disabled]="petSize.value !== row.value?.size">
            {{ row.size | translate }} - ¥{{ row.price | number }}
          </mat-radio-button>
        </div>
      </div>
    }
  </mat-radio-group>
</mat-card>
